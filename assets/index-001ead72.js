import{a as _,T as w,r as e,s as D,_ as h,f as d,d as y,Q as H,U as N,b as F,V as L,W as k,g as I}from"./index-4b973fe8.js";let E;const R="HoverCard",[g,q]=_(R,[w]),m=w(),[M,O]=g(R),A=o=>{const{__scopeHoverCard:n,children:r,open:i,defaultOpen:c,onOpenChange:s,openDelay:$=700,closeDelay:p=300}=o,a=m(n),v=e.useRef(0),f=e.useRef(0),b=e.useRef(!1),l=e.useRef(!1),[C=!1,t]=F({prop:i,defaultProp:c,onChange:s}),u=e.useCallback(()=>{clearTimeout(f.current),v.current=window.setTimeout(()=>t(!0),$)},[$,t]),S=e.useCallback(()=>{clearTimeout(v.current),!b.current&&!l.current&&(f.current=window.setTimeout(()=>t(!1),p))},[p,t]),T=e.useCallback(()=>t(!1),[t]);return e.useEffect(()=>()=>{clearTimeout(v.current),clearTimeout(f.current)},[]),e.createElement(M,{scope:n,open:C,onOpenChange:t,onOpen:u,onClose:S,onDismiss:T,hasSelectionRef:b,isPointerDownOnContentRef:l},e.createElement(L,a,r))},U="HoverCardTrigger",K=e.forwardRef((o,n)=>{const{__scopeHoverCard:r,...i}=o,c=O(U,r),s=m(r);return e.createElement(k,h({asChild:!0},s),e.createElement(I.a,h({"data-state":c.open?"open":"closed"},i,{ref:n,onPointerEnter:d(o.onPointerEnter,x(c.onOpen)),onPointerLeave:d(o.onPointerLeave,x(c.onClose)),onFocus:d(o.onFocus,c.onOpen),onBlur:d(o.onBlur,c.onClose),onTouchStart:d(o.onTouchStart,$=>$.preventDefault())})))}),W="HoverCardPortal",[z,B]=g(W,{forceMount:void 0}),P="HoverCardContent",G=e.forwardRef((o,n)=>{const r=B(P,o.__scopeHoverCard),{forceMount:i=r.forceMount,...c}=o,s=O(P,o.__scopeHoverCard);return e.createElement(D,{present:i||s.open},e.createElement(V,h({"data-state":s.open?"open":"closed"},c,{onPointerEnter:d(o.onPointerEnter,x(s.onOpen)),onPointerLeave:d(o.onPointerLeave,x(s.onClose)),ref:n})))}),V=e.forwardRef((o,n)=>{const{__scopeHoverCard:r,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:s,onInteractOutside:$,...p}=o,a=O(P,r),v=m(r),f=e.useRef(null),b=y(n,f),[l,C]=e.useState(!1);return e.useEffect(()=>{if(l){const t=document.body;return E=t.style.userSelect||t.style.webkitUserSelect,t.style.userSelect="none",t.style.webkitUserSelect="none",()=>{t.style.userSelect=E,t.style.webkitUserSelect=E}}},[l]),e.useEffect(()=>{if(f.current){const t=()=>{C(!1),a.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var u;((u=document.getSelection())===null||u===void 0?void 0:u.toString())!==""&&(a.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",t),()=>{document.removeEventListener("pointerup",t),a.hasSelectionRef.current=!1,a.isPointerDownOnContentRef.current=!1}}},[a.isPointerDownOnContentRef,a.hasSelectionRef]),e.useEffect(()=>{f.current&&Q(f.current).forEach(u=>u.setAttribute("tabindex","-1"))}),e.createElement(H,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:$,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:d(s,t=>{t.preventDefault()}),onDismiss:a.onDismiss},e.createElement(N,h({},v,p,{onPointerDown:d(p.onPointerDown,t=>{t.currentTarget.contains(t.target)&&C(!0),a.hasSelectionRef.current=!1,a.isPointerDownOnContentRef.current=!0}),ref:b,style:{...p.style,userSelect:l?"text":void 0,WebkitUserSelect:l?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})))});function x(o){return n=>n.pointerType==="touch"?void 0:o()}function Q(o){const n=[],r=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;r.nextNode();)n.push(r.currentNode);return n}const J=A,X=K,Y=G;export{Y as $,J as a,X as b};
