import{a as F,T as h,r as e,s as O,L as w,_ as u,d as C,J as D,M,N as I,f as g,O as T,P as k,Q as y,U as N,b as S,V as K,h as L,g as G,W as U}from"./index-4b973fe8.js";const m="Popover",[E,Y]=F(m,[h]),x=h(),[V,l]=E(m),H=o=>{const{__scopePopover:s,children:a,open:f,defaultOpen:n,onOpenChange:t,modal:c=!1}=o,r=x(s),d=e.useRef(null),[i,b]=e.useState(!1),[v=!1,p]=S({prop:f,defaultProp:n,onChange:t});return e.createElement(K,r,e.createElement(V,{scope:s,contentId:L(),triggerRef:d,open:v,onOpenChange:p,onOpenToggle:e.useCallback(()=>p(P=>!P),[p]),hasCustomAnchor:i,onCustomAnchorAdd:e.useCallback(()=>b(!0),[]),onCustomAnchorRemove:e.useCallback(()=>b(!1),[]),modal:c},a))},J="PopoverTrigger",Q=e.forwardRef((o,s)=>{const{__scopePopover:a,...f}=o,n=l(J,a),t=x(a),c=C(s,n.triggerRef),r=e.createElement(G.button,u({type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":A(n.open)},f,{ref:c,onClick:g(o.onClick,n.onOpenToggle)}));return n.hasCustomAnchor?r:e.createElement(U,u({asChild:!0},t),r)}),_="PopoverPortal",[W,Z]=E(_,{forceMount:void 0}),j=o=>{const{__scopePopover:s,forceMount:a,children:f,container:n}=o,t=l(_,s);return e.createElement(W,{scope:s,forceMount:a},e.createElement(O,{present:a||t.open},e.createElement(w,{asChild:!0,container:n},f)))},$="PopoverContent",q=e.forwardRef((o,s)=>{const a=Z($,o.__scopePopover),{forceMount:f=a.forceMount,...n}=o,t=l($,o.__scopePopover);return e.createElement(O,{present:f||t.open},t.modal?e.createElement(z,u({},n,{ref:s})):e.createElement(B,u({},n,{ref:s})))}),z=e.forwardRef((o,s)=>{const a=l($,o.__scopePopover),f=e.useRef(null),n=C(s,f),t=e.useRef(!1);return e.useEffect(()=>{const c=f.current;if(c)return D(c)},[]),e.createElement(M,{as:I,allowPinchZoom:!0},e.createElement(R,u({},o,{ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:g(o.onCloseAutoFocus,c=>{var r;c.preventDefault(),t.current||(r=a.triggerRef.current)===null||r===void 0||r.focus()}),onPointerDownOutside:g(o.onPointerDownOutside,c=>{const r=c.detail.originalEvent,d=r.button===0&&r.ctrlKey===!0,i=r.button===2||d;t.current=i},{checkForDefaultPrevented:!1}),onFocusOutside:g(o.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})))}),B=e.forwardRef((o,s)=>{const a=l($,o.__scopePopover),f=e.useRef(!1),n=e.useRef(!1);return e.createElement(R,u({},o,{ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var c;if((c=o.onCloseAutoFocus)===null||c===void 0||c.call(o,t),!t.defaultPrevented){var r;f.current||(r=a.triggerRef.current)===null||r===void 0||r.focus(),t.preventDefault()}f.current=!1,n.current=!1},onInteractOutside:t=>{var c,r;(c=o.onInteractOutside)===null||c===void 0||c.call(o,t),t.defaultPrevented||(f.current=!0,t.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const d=t.target;((r=a.triggerRef.current)===null||r===void 0?void 0:r.contains(d))&&t.preventDefault(),t.detail.originalEvent.type==="focusin"&&n.current&&t.preventDefault()}}))}),R=e.forwardRef((o,s)=>{const{__scopePopover:a,trapFocus:f,onOpenAutoFocus:n,onCloseAutoFocus:t,disableOutsidePointerEvents:c,onEscapeKeyDown:r,onPointerDownOutside:d,onFocusOutside:i,onInteractOutside:b,...v}=o,p=l($,a),P=x(a);return T(),e.createElement(k,{asChild:!0,loop:!0,trapped:f,onMountAutoFocus:n,onUnmountAutoFocus:t},e.createElement(y,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:b,onEscapeKeyDown:r,onPointerDownOutside:d,onFocusOutside:i,onDismiss:()=>p.onOpenChange(!1)},e.createElement(N,u({"data-state":A(p.open),role:"dialog",id:p.contentId},P,v,{ref:s,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function A(o){return o?"open":"closed"}const ee=H,oe=Q,te=j,ce=q;export{te as $,ce as a,ee as b,oe as c};
